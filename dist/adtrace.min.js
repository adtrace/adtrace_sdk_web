!function(e){"use strict";function n(e,n,r,t,a){var o=new XMLHttpRequest;o.open(e,n,!0),o.setRequestHeader("Client-SDK","js1.0.0"),o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<400?t&&t(o):a&&a&&a(new Error("Server responded with HTTP "+o.status),o))},a&&(o.onerror=a),o.send(r)}function r(e){var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.join("&")}function t(e){var n={};if("object"!=typeof e||!e)return n;for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}!1 in new XMLHttpRequest&&(n=function(){}),e.AdTrace=function(e){var a=t((e=e||{}).device_ids);return a.app_token=e.app_token,a.environment=e.environment,a.os_name=e.os_name||"android",{trackSession:function(e,o){n("GET","https://app.adtrace.io/session?"+r(t(a)),null,e,o)},trackEvent:function(e,u,c){e=e||{};var i=t(a),s=function(e){var n=parseFloat(e.revenue);if(n<0||!e.currency)return null;return{revenue:n.toFixed(5),currency:e.currency}}(e),p=o(e.callback_params),v=o(e.partner_params);i.event_token=e.event_token,s&&(i.revenue=s.revenue,i.currency=s.currency);p&&(i.callback_params=JSON.stringify(p));v&&(i.partner_params=JSON.stringify(v));n("GET","https://app.adtrace.io/event?"+r(i),null,u,c)}};function o(e){if(!(e=e||[]).length)return null;for(var n={},r=0;r<e.length;r++)n[e[r].key]=e[r].value;return t(n)}}}(window);
