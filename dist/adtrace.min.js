!function(e){"use strict";function n(e,n,t,r,a){var o=new XMLHttpRequest;o.open(e,n,!0),o.setRequestHeader("Client-SDK","js1.1.0"),"POST"==e&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<400?r&&r(o):a&&a&&a(new Error("Server responded with HTTP "+o.status),o))},a&&(o.onerror=a),o.send(t)}function t(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}function r(e){var n={};if("object"!=typeof e||!e)return n;for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}!1 in new XMLHttpRequest&&(n=function(){}),e.AdTrace=function(e){var a,o,i,s=r((e=e||{}).device_ids),u=!1,c=localStorage.getItem("adtrace_js_sdk_id");return s.app_token=e.app_token,s.environment=e.environment,s.os_name=e.os_name||"android",s.app_version=e.app_version,null==c&&(a=function(e){var n=JSON.parse(e.responseText);n.hasOwnProperty("adid")&&(c=n.adid,localStorage.setItem("adtrace_js_sdk_id",c),u&&(u=!1,setTimeout(function(){d(function(e){},function(e,n){})},5e3)))},o=function(e,n){},(i=r(s)).device_type="phone",i.source="install_referrer",i.referrer="utm_source=google-play&utm_medium=organic",i.android_uuid=i.gps_adid,i.needs_response_details=1,i.event_buffering_enabled=0,i.raw_referrer=i.referrer,i.tracking_enabled=1,i.installed_at=(new Date).toISOString()+"+0000",i.session_count=1,i.attribution_deeplink=1,i.created_at=i.installed_at,i.sent_at=i.installed_at,n("POST","https://app.adtrace.io/sdk_click",t(i),a,o)),{getAdId:function(){return c},trackSession:d,trackEvent:function(e,a,o){e=e||{};var i=r(s),u=function(e){var n=parseFloat(e.revenue);if(n<0||!e.currency)return null;return{revenue:n.toFixed(5),currency:e.currency}}(e),c=l(e.callback_params),d=l(e.partner_params);i.event_token=e.event_token,u&&(i.revenue=u.revenue,i.currency=u.currency);c&&(i.callback_params=JSON.stringify(c));d&&(i.partner_params=JSON.stringify(d));n("GET","https://app.adtrace.io/event?"+t(i),null,a,o)}};function d(e,a){null==c?(a(new Error("Adtrace Session will sent after inistalling"),""),u=!0):n("GET","https://app.adtrace.io/session?"+t(r(s)),null,e,a)}function l(e){if(!(e=e||[]).length)return null;for(var n={},t=0;t<e.length;t++)n[e[t].key]=e[t].value;return r(n)}}}(window);